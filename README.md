# WEB-ларёк - Интернет-магазин для веб-разработчиков

## Используемый стек

- **TypeScript** - типизированный JavaScript
- **SCSS** - препроцессор для стилей
- **Webpack** - сборщик модулей
- **HTML5** - разметка страниц
- **EventEmitter** - брокер событий для связи компонентов

## Инструкция по сборке и запуску

### Установка зависимостей
```bash
npm install
```

### Запуск в режиме разработки
```bash
npm run start
```

### Сборка для продакшена
```bash
npm run build
```

## Архитектура проекта

Проект построен на основе **MVP (Model-View-Presenter)** архитектуры с использованием брокера событий для связи компонентов.

### Основные принципы архитектуры

1. **Изолированность** - каждый компонент может работать независимо
2. **Единственная ответственность** - каждый класс решает одну конкретную задачу
3. **Масштабируемость** - возможность легко добавлять новую функциональность
4. **Слабая связанность** - компоненты взаимодействуют через события

### Структура архитектуры

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│    Model    │────▶│  Presenter  │────▶│    View     │
│  (Данные)   │     │  (Логика)   │     │(Интерфейс)  │
└─────────────┘     └─────────────┘     └─────────────┘
       ▲                    │                    │
       │                    ▼                    │
       └─────────────┐     ┌─────────────┐     │
                     │     │EventEmitter │     │
                     │     │(События)    │     │
                     └────▶└─────────────┘◀────┘
```

## Описание базовых классов

### EventEmitter (Брокер событий)
Класс `EventEmitter` обеспечивает работу событий. Его функции:
- Возможность установить и снять слушателей событий
- Вызов слушателей при возникновении события
- Поддержка регулярных выражений для фильтрации событий
- Возможность слушать все события через wildcard '*'

### Api (Клиент API)
Класс `Api` обеспечивает взаимодействие с сервером. Его функции:
- Выполнение HTTP-запросов (GET, POST, PUT, DELETE)
- Обработка ответов сервера
- Управление заголовками запросов
- Обработка ошибок

### Model (Модель данных)
Класс `Model` управляет данными приложения. Его функции:
- Хранение состояния приложения (товары, корзина, заказы)
- Трансформация данных между API и представлением
- Валидация данных
- Управление кэшированием

### Presenter (Презентер)
Класс `Presenter` содержит бизнес-логику приложения. Его функции:
- Обработка пользовательских действий
- Координация между моделью и представлением
- Управление состоянием приложения
- Валидация форм

### View (Представление)
Класс `View` отвечает за отображение интерфейса. Его функции:
- Рендеринг HTML-элементов
- Обработка DOM-событий
- Управление модальными окнами
- Обновление UI в ответ на изменения данных

## Описание компонентов

### ProductCard (Карточка товара)
Компонент отображает информацию о товаре в каталоге. Функции:
- Показ изображения, названия, цены и категории товара
- Обработка клика для открытия детального просмотра
- Добавление товара в корзину

### ProductModal (Модальное окно товара)
Компонент отображает детальную информацию о товаре. Функции:
- Показ полного описания товара
- Кнопки "В корзину" / "Убрать из корзины"
- Закрытие по клику вне окна или на крестик

### Basket (Корзина)
Компонент управляет корзиной покупок. Функции:
- Отображение списка товаров в корзине
- Подсчет общей стоимости
- Удаление товаров из корзины
- Переход к оформлению заказа

### OrderForm (Форма заказа)
Компонент для оформления заказа. Функции:
- **Шаг 1**: Выбор способа оплаты и ввод адреса доставки
- **Шаг 2**: Ввод email и телефона покупателя
- Валидация полей формы
- Отправка заказа на сервер

### SuccessModal (Окно успешного заказа)
Компонент отображает результат успешного заказа. Функции:
- Показ сообщения об успешном оформлении
- Отображение списанной суммы
- Очистка корзины после заказа

## Типы данных

### API типы
- `Product` - товар с сервера
- `Order` - заказ для отправки на сервер
- `Customer` - данные покупателя

### Модель данных
- `ProductModel` - товар в приложении
- `BasketModel` - корзина покупок
- `OrderModel` - заказ в процессе оформления

### События
- `'product:add'` - добавление товара в корзину
- `'product:remove'` - удаление товара из корзины
- `'basket:update'` - обновление корзины
- `'order:submit'` - отправка заказа
- `'modal:open'` - открытие модального окна
- `'modal:close'` - закрытие модального окна

## Процессы в приложении

### Просмотр каталога
1. Загрузка товаров через API
2. Отображение карточек товаров
3. Обработка клика по карточке → открытие модального окна

### Работа с корзиной
1. Добавление товара → событие `'product:add'`
2. Обновление счетчика в шапке
3. Обновление списка товаров в корзине
4. Пересчет общей стоимости

### Оформление заказа
1. Валидация данных на каждом шаге
2. Активация кнопки "Далее" только при заполнении всех полей
3. Отправка заказа на сервер
4. Показ окна успешного заказа
5. Очистка корзины

### Управление модальными окнами
1. Открытие по событию `'modal:open'`
2. Закрытие по клику вне окна или на крестик
3. Предотвращение закрытия при клике внутри окна
4. Очистка содержимого при закрытии

## Масштабируемость

Архитектура позволяет легко добавлять:
- Новые типы товаров
- Дополнительные способы оплаты
- Систему скидок и промокодов
- Историю заказов
- Личный кабинет пользователя
- Систему отзывов
- Фильтрацию и поиск товаров

Все изменения можно внедрять без изменения базового кода благодаря слабой связанности компонентов и использованию событий.
